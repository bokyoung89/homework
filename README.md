# 29CM 백엔드 포지션 과제

## 사용 기술
- Java 17
- Spring Boot 3.2.4
- Gradle
- h2database
- Hibernate
- Junit5

## 요구사항
* 29CM의 상품 주문 프로그램을 작성합니다.
* 상품은 고유의 상품번호와 상품명, 판매가격, 재고수량 정보를 가지고 있습니다.
* 한 번에 여러개의 상품을 같이 주문할 수 있어야 합니다.
* 상품번호, 주문수량은 반복적으로 입력 받을 수 있습니다.
* 주문은 상품을 입력번호, 수량받습니다.
  * empty 입력(space + ENTER) 이 되었을 경우 해당 건에 대한 주문이 완료되고, 결제하는 것으로 판단합니다.
  * 결제 시 재고 확인을 하여야 하며 재고가 부족할 경우 결제를 시도하면 SoldOutException이 발생되어야 합니다.
* 주문 금액이 5만원 미만인 경우 배송료 2,500원이 추가되어야 합니다.
* 주문이 완료되었을 경우 주문 내역과 주문 금액, 결제 금액 (배송비 포함)을 화면에 display합니다.
* 'q' 또는 'quit'을 입력하면 프로그램이 종료되어야 합니다.
* Test에서는 반드시 multi thread 요청으로 SoldOutException이 정상 동작하는지 확인하는 단위테스트가 작성되어야 합니다.
* 상품의 데이터는 하단에 주어지는 데이터를 사용해주세요
  * 데이터를 불러오는 방식은 자유입니다.
  * 코드에 포함되어도 좋고, 파일을 불러도 되고, in memory db를 사용하셔도 됩니다.
  * 하지만 상품에 대한 상품번호, 상품명, 판매가격, 재고수량 데이터는 그대로 사용하셔야 합니다.
  * 상품 데이터 csv 파일을 같이 제공합니다.

## 체크 리스트
* **요구사항에 일치하는 기능**
  * 기술은 비즈니스 성과를 만들어 내야 의미가 있다. 요구사항에 맞게 동작되는 것이 중요하다.
* **유지보수와 확장 용이성**
  * OOP에 대한 이해
  * SOLID 원칙
* **제품의 아키텍쳐 설계**
  * 책임 분리
  * 적절한 책임 단위로 쪼개어진 코드 파일
  * 일관된 코드 형식
* **효율성**
  * 시간 복잡도에 대한 이해
  * 프로젝트에 적절한 외부 라이브러리 선택

## ERD 설계
![29CM_상품주문_ERD drawio](https://github.com/bokyoung89/pre-order-service/assets/58727604/2f0163a1-d5bc-4592-933a-09bd8677d9b8)
* 주문상품(order_item)
  * 상품과 주문은 다대다 관계이므로 다대일 관계로 풀어주기 위한 매핑 테이블
  * 주문 시 상품번호(item_id), 주문수량(order_id)을 입력받아 주문가격(price)을 계산함
* 상품(item)
  * 하나의 상품 번호로 여러 개의 주문이 생성될 수 있으므로 주문상품과 다대일 단방향 관계
* 주문(Orders)
  * 한번에 여러 개의 상품을 같이 주문할 수 있어야 하므로 주문과 주문상품(OrderProduct)은 일대다 관계
  * 주문상태는 주문(ORDER), 취소(CANCEL)로 표현함. 주문 시 생성일시가 insert되고, 취소 시 삭제일시가 update됨
  * 전체주문가격(total_price)을 필드로 두고 역정규화함  배송료가 포함된 가격(주문 금액이 5만원 미만인 경우). 

## API 명세서
링크 : [https://sbk8689.gitbook.io/29cm/](https://sbk8689.gitbook.io/29cm/)